local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

-- Função para criar o highlight no personagem
local function applyESP(player)
    local function createHighlight()
        local character = player.Character
        if not character or character:FindFirstChild("Highlight_ESP") then return end

        local highlight = Instance.new("Highlight")
        highlight.Name = "Highlight_ESP"
        highlight.FillColor = Color3.fromRGB(255, 255, 0) -- Amarelo
        highlight.OutlineColor = Color3.new(1, 1, 0)
        highlight.FillTransparency = 0.2
        highlight.OutlineTransparency = 0
        highlight.Adornee = character
        highlight.Parent = character
    end

    if player.Character then
        createHighlight()
    end

    player.CharacterAdded:Connect(function()
        wait(1)
        createHighlight()
    end)
end

-- Aplica a todos os jogadores (exceto você)
for _, player in ipairs(Players:GetPlayers()) do
    if player ~= LocalPlayer then
        applyESP(player)
    end
end

-- Aplica aos novos jogadores que entrarem
Players.PlayerAdded:Connect(function(player)
    if player ~= LocalPlayer then
        applyESP(player)
    end
end)
