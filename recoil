local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

-- Função que percorre ferramentas e tenta remover recoil de várias formas
local function removeRecoil(tool)
    -- Modo 1: Zerar valores numéricos com nome relacionado a recoil
    for _, obj in pairs(tool:GetDescendants()) do
        if obj:IsA("NumberValue") or obj:IsA("IntValue") or obj:IsA("Vector3Value") then
            if obj.Name:lower():find("recoil") then
                if obj:IsA("Vector3Value") then
                    obj.Value = Vector3.new(0, 0, 0)
                else
                    obj.Value = 0
                end
            end
        end
    end

    -- Modo 2: Tenta modificar módulos usados internamente
    for _, module in pairs(tool:GetDescendants()) do
        if module:IsA("ModuleScript") then
            local success, result = pcall(require, module)
            if success and type(result) == "table" then
                for key, value in pairs(result) do
                    if type(value) == "number" and tostring(key):lower():find("recoil") then
                        result[key] = 0
                    elseif typeof(value) == "Vector3" and tostring(key):lower():find("recoil") then
                        result[key] = Vector3.new(0, 0, 0)
                    end
                end
            end
        end
    end

    -- Modo 3: Conectar ao disparo e redefinir câmera após cada tiro (para recoil visual)
    if tool:FindFirstChild("Activate") then
        tool.Activated:Connect(function()
            local cam = workspace.CurrentCamera
            if cam then
                cam.CFrame = cam.CFrame -- Força a "travar" o recoil
            end
        end)
    end
end

-- Monitora ferramentas equipadas para aplicar o patch
local function monitorTools()
    local character = LocalPlayer.Character
    if not character then return end

    for _, tool in pairs(character:GetChildren()) do
        if tool:IsA("Tool") then
            removeRecoil(tool)
        end
    end

    character.ChildAdded:Connect(function(child)
        if child:IsA("Tool") then
            removeRecoil(child)
        end
    end)
end

-- Detecta quando o personagem é adicionado
LocalPlayer.CharacterAdded:Connect(function()
    wait(1)
    monitorTools()
end)

-- Caso o personagem já esteja carregado
if LocalPlayer.Character then
    monitorTools()
end
